!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.JSBridge=n():e.JSBridge=n()}(this,function(){return t={},i.m=o=[function(e,n,o){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var t=function(e,n,o){return n&&i(e.prototype,n),o&&i(e,o),e};function i(e,n){for(var o=0;o<n.length;o++){var t=n[o];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function d(e){return"function"==typeof e}var a=function(){var e=window.navigator.userAgent.toLowerCase(),n=/Android/i.test(e),o=/iPhone|iPad|iPod/i.test(e),t=/Safari/i.test(e),i=/Mac OS X/i.test(e);t&&!o&&i&&"ontouchend"in document&&(o=!0);var r=[];return o&&(r=e.match(/OS\s([0-9_]*)/i)),n&&(r=e.match(/Android\s([0-9\.]*)/i)),{isIOS:o,isAndroid:n,version:r&&r.length?r[1].replace(/_/g,"."):""}}(),u=a.isIOS,s=a.isAndroid,c=a.version;function l(e){window.location.href=e}var f=(t(h,[{key:"init",value:function(){u||s?""===this.isDisabled?this.onSchemeOpen():this.onSchemeDisabled():this.downloadApp()}},{key:"onSchemeOpen",value:function(){var e;this.beforeSilenceOpen(),u&&8<window.parseInt(c)&&void 0!==(void 0===(e=this.deepLink)?"undefined":r(e))&&null!==e&&""!==e?l(this.deepLink):(l(this.scheme),this.onSchemeFailed())}},{key:"onSchemeFailed",value:function(){var e,n,o,t,i=this;function r(){(document.hidden||document.webkitHidden)&&clearTimeout(t)}e=function(){d(i.onTimeout)?i.onTimeout():i.downloadApp()},n=this.delay,o=Date.now(),t=setTimeout(function(){document.hidden||document.webkitHidden||Date.now()-o<n+200&&e()},n),document.addEventListener("visibilitychange",r,!1),document.addEventListener("webkitvisibilitychange",r,!1),window.addEventListener("pagehide",function(){clearTimeout(t)},!1)}},{key:"onSchemeDisabled",value:function(){d(this.onDisabled)?this.onDisabled(this.isDisabled):this.downloadApp()}},{key:"beforeSilenceOpen",value:function(){d(this.onBeforeOpen)&&this.onBeforeOpen()}},{key:"downloadApp",value:function(){var e=this.download,n=e.ios,o=void 0===n?"":n,t=e.android,i=void 0===t?"":t,r=e.other,d=void 0===r?"":r;u?""!==o&&(window.location.href=o):s?""!==i&&(window.location.href=i):""!==d&&(window.location.href=d)}}]),h);function h(e){var n=e.scheme,o=void 0===n?"":n,t=e.deepLink,i=void 0===t?"":t,r=e.download,d=void 0===r?{ios:"",android:"",other:""}:r,a=e.delay,u=void 0===a?5e3:a,s=e.disabledScheme,c=void 0===s?[]:s,l=e.onDisabled,f=e.onBeforeOpen,p=e.onTimeout;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,h),this.scheme=o,this.deepLink=i,this.download=d,this.delay=u,this.isDisabled=0<c.length?function(e){for(var n=window.navigator.userAgent,o=0;o<e.length;o++){if(new RegExp(e[o],"i").test(n))return e[o]}return""}(c):"",this.onDisabled=l,this.onBeforeOpen=f,this.onTimeout=p,this.init()}function p(e){new f(e)}window.$openapp||(window.$openapp=p),n.default=p}],i.c=t,i.d=function(e,n,o){i.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(n,e){if(1&e&&(n=i(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var t in n)i.d(o,t,function(e){return n[e]}.bind(null,t));return o},i.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(n,"a",n),n},i.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},i.p="",i(i.s=0);function i(e){if(t[e])return t[e].exports;var n=t[e]={i:e,l:!1,exports:{}};return o[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}var o,t});