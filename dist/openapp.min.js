!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.JSBridge=n():e.JSBridge=n()}(this,function(){return i={},o.m=t=[function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(e,n,t){return n&&o(e.prototype,n),t&&o(e,t),e};function o(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function d(e){return"function"==typeof e}var r,a,s,u,c=(r=window.navigator.userAgent.toLowerCase(),a=/android/i.test(r),s=/iphone|ipad|ipod/i.test(r),u=[],s&&(u=r.match(/os\s([0-9_]*)/)),a&&(u=r.match(/android\s([0-9\.]*)/)),{isIOS:s,isAndroid:a,version:u&&u.length?u[1].replace(/_/g,"."):""}),l=c.isIOS,f=c.isAndroid,p=c.version;function h(e){if(l){var n=document.createElement("iframe");return n.style.display="none",n.src=e,document.documentElement.appendChild(n),void document.documentElement.removeChild(n)}window.location.href=e}var v=(i(m,[{key:"init",value:function(){""!==this.deepLink?this.isSetDeepLink():this.notSetDeepLink()}},{key:"isSetDeepLink",value:function(){if(l&&9<=window.parseInt(p))return this.beforeSilenceOpen(),void h(this.deepLink);this.notSetDeepLink()}},{key:"notSetDeepLink",value:function(){if(l||f)return""===this.isDisabled?(this.beforeSilenceOpen(),h(this.scheme),void this.schemeFailed()):void this.schemeDisabled();this.downloadApp()}},{key:"schemeFailed",value:function(){var e,n,t,i,o=this;function r(){(document.hidden||document.webkitHidden)&&clearTimeout(i)}e=function(){d(o.onTimeout)?o.onTimeout():o.downloadApp()},n=this.delay,t=Date.now(),i=setTimeout(function(){document.hidden||document.webkitHidden||Date.now()-t<n+200&&e()},n),document.addEventListener("visibilitychange",r,!1),document.addEventListener("webkitvisibilitychange",r,!1),window.addEventListener("pagehide",function(){clearTimeout(i)},!1)}},{key:"schemeDisabled",value:function(){d(this.onDisabled)?this.onDisabled(this.isDisabled):this.downloadApp()}},{key:"beforeSilenceOpen",value:function(){d(this.onBeforeOpen)&&this.onBeforeOpen()}},{key:"downloadApp",value:function(){var e=this.download,n=e.ios,t=void 0===n?"":n,i=e.android,o=void 0===i?"":i,r=e.other,d=void 0===r?"":r;l?""!==t&&(window.location.href=t):f?""!==o&&(window.location.href=o):""!==d&&(window.location.href=d)}}]),m);function m(e){var n=e.scheme,t=void 0===n?"":n,i=e.deepLink,o=void 0===i?"":i,r=e.download,d=void 0===r?{ios:"",android:"",other:""}:r,a=e.delay,s=void 0===a?3e3:a,u=e.disabledApp,c=void 0===u?[]:u,l=e.onDisabled,f=e.onBeforeOpen,p=e.onTimeout;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,m),this.scheme=t,this.deepLink=o,this.download=d,this.delay=s,this.isDisabled=0<c.length?function(e){for(var n=window.navigator.userAgent.toLowerCase(),t=0;t<e.length;t++){if(new RegExp(e[t]+"/","i").test(n))return e[t]}return""}(c):"",this.onDisabled=l,this.onBeforeOpen=f,this.onTimeout=p,this.init()}function b(e){new v(e)}window.$openapp||(window.$openapp=b),n.default=b}],o.c=i,o.d=function(e,n,t){o.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(n,e){if(1&e&&(n=o(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var t=Object.create(null);if(o.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var i in n)o.d(t,i,function(e){return n[e]}.bind(null,i));return t},o.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(n,"a",n),n},o.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},o.p="",o(o.s=0);function o(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}var t,i});